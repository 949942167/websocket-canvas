<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=1920">
    <script src="js/socket.js"></script>
    <script src="js/socket.js"></script>
    <script src="https://h5.tv.mi.com/common/js/jquery-1.11.3.min.js"></script>
    <script src="https://h5.tv.mi.com/common/js/h5_base.js"></script>
</head>
<body style="background: #e4ff9f;display: flex;justify-content: center">
<div style="width: 375px;height: 640px;background: red;margin-top: 100px">
    <canvas id="canvas"></canvas>
</div>

</body>
<script>
    var canvas = document.getElementById("canvas");
    var socket;
    canvas.width = 375;
    canvas.height = 640;
    var content = canvas.getContext("2d")

    function drawLine(x1,y1,x2,y2) {
        content.beginPath();
        content.moveTo(x1,y1);
        content.lineWidth = 5;
        content.lineCap = "round";
        content.lineJoin = "round";
        content.lineTo(x2,y2);
        content.stroke();
        content.closePath();
    }
    function backPressed(){
        log("backPressed");
        return true;
    }
    var conf = {backPressFunction:backPressed}
    initPage(conf);
    window.onload = function(){
        socket = io('http://10.235.142.232:8081');
        socket.on('draw',function(data){
            drawLine(data.beginX/2,data.beginY/2,data.endX/2,data.endY/2);
            console.log(socket.id);
        });
        socket.on('clear', function(data) {
            content.clearRect(0, 0, canvas.width, canvas.height);
        });
        socket.on("login",(data) => {
            console.log(data);})
    }
</script>
</html>